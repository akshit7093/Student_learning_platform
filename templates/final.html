<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Student Analyzer</title>
    <link rel="stylesheet" href="../static/final.css">
    <link rel="stylesheet" href="../static/job_listings.css"> <!-- New CSS file for job listings -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Include Chart.js from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <header class="app-header">
                <h1>Ai</h1>
                <p>AI Student Analyzer</p>
            </header>
            <nav class="main-nav">
                <ul>
                    <li><a href="#dashboard" class="nav-link active">Dashboard</a></li>
                    <li><a href="#students" class="nav-link">Students</a></li>
                    <li><a href="#reports" class="nav-link">Reports</a></li>
                    <li><a href="#job-analysis" class="nav-link">Job Analysis</a></li>
                    <li><a href="#job-listings" class="nav-link">Job Listings</a></li> <!-- New Link -->
                    <li><a href="#chat" class="nav-link">Chat</a></li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Top Control Bar -->
            <header class="top-bar">
                <div class="input-group">
                    <label for="student-selector">Select Student</label>
                    <select id="student-selector">
                        <option value="">-- Select a Student --</option>
                        <!-- Options will be populated by JS -->
                    </select>
                    <button id="generate-report-btn" class="btn btn-secondary" disabled>Generate Report</button>
                </div>
                <div class="input-group">
                    <label for="job-application-input">Job Application Link</label>
                    <input type="text" id="job-application-input" placeholder="Paste job application link here...">
                     <button id="analyze-job-btn" class="btn btn-primary" disabled>Analyze</button>
                </div>
            </header>

            <!-- Loading Spinner -->
            <div id="loading-spinner" class="loading-overlay hidden">
                <div class="spinner"></div>
                <p>Processing...</p>
            </div>

            <!-- Dashboard / Overview -->
            <section id="dashboard" class="content-section active">
                <h2>Dashboard Overview</h2>
                <div class="dashboard-grid">
                    <!-- Metric Cards Row -->
                    <div class="metric-cards-grid">
                        <div class="card">
                            <h3>Total Students</h3>
                            <p class="metric" id="total-students-count">1</p> <!-- ID added for JS -->
                        </div>
                        <div class="card">
                            <h3>Reports Generated</h3>
                            <p class="metric" id="reports-generated-count">0</p> <!-- ID added for JS -->
                        </div>
                        <div class="card">
                            <h3>Job Analyses</h3>
                            <p class="metric" id="job-analyses-count">0</p> <!-- ID added for JS -->
                        </div>
                    </div>

                    <!-- Large Card for Skills Distribution -->
                    <div class="card large-card chart-container">
                        <h3>Skills Distribution (for selected student)</h3>
                        <!-- Replace placeholder with canvas for Chart.js -->
                        <canvas id="skills-chart-canvas"></canvas>
                    </div>

                    <!-- Row for DSA and Job Match -->
                    <div class="chart-row">
                        <div class="card chart-container">
                            <h3>DSA Performance (for selected student)</h3>
                             <!-- Replace placeholder with canvas for Chart.js -->
                            <canvas id="dsa-chart-canvas"></canvas>
                        </div>
                        <div class="card chart-container">
                            <h3>Job Match Score (for selected student)</h3>
                             <!-- Replace placeholder with canvas for Chart.js -->
                            <canvas id="job-match-chart-canvas"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Student Report Display Area -->
            <section id="reports" class="content-section hidden">
                <h2 id="report-title">Student Performance Report</h2>
                <div class="report-grid">
                    <div class="report-section summary card">
                        <h3>HR Summary</h3>
                        <p id="summary-text">Summary will appear here...</p>
                    </div>
                    <div class="report-section resume card">
                         <h3>Resume Analysis</h3>
                        <div class="resume-section">
                            <div class="resume-column">
                                <h4>Key Skills</h4>
                                <div class="skills-list" id="resume-skills"></div>
                                <h4 style="margin-top: 20px;">Professional Links</h4>
                                <ul class="links-list" id="resume-links"></ul>
                            </div>
                            <div class="resume-column">
                                <h4>Missing Elements</h4>
                                <ul id="resume-missing"></ul>
                            </div>
                        </div>
                    </div>
                    <div class="report-section scores card">
                        <h3>Detailed Scores</h3>
                        <div id="scores-grid"></div>
                    </div>
                    <div class="report-section analysis card">
                        <h3>Analysis</h3>
                        <div id="analysis-content">
                            <div class="analysis-grid">
                                <div class="analysis-column">
                                    <h4>Strengths</h4>
                                    <ul id="strengths-list"></ul>
                                </div>
                                <div class="analysis-column">
                                    <h4>Weaknesses</h4>
                                    <ul id="weaknesses-list"></ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="report-section advice card">
                        <h3>Actionable Advice</h3>
                        <ul id="advice-list"></ul>
                    </div>
                    <div class="report-section youtube card">
                        <h3>Recommended Learning Resources</h3>
                        <div class="youtube-recommendations" id="youtube-recommendations"></div>
                    </div>
                </div>
            </section>

            <!-- Job Application Analysis Display Area -->
            <section id="job-analysis" class="content-section hidden">
                <h2>Job Application Analysis</h2>
                <div class="job-analysis-grid">
                    <div class="job-section job-strengths card">
                        <h3>Strengths</h3>
                        <div id="job-strengths-list"></div>
                    </div>
                    <div class="job-section job-weaknesses card">
                        <h3>Weaknesses</h3>
                        <div id="job-weaknesses-list"></div>
                    </div>
                    <div class="job-section job-enhancements card">
                        <h3>Enhancement Recommendations</h3>
                        <div id="job-enhancements-list"></div>
                    </div>
                    <div class="job-section youtube card">
                        <h3>Recommended Learning Resources</h3>
                        <div class="youtube-recommendations" id="job-youtube-recommendations"></div>
                    </div>
                </div>
            </section>

            <!-- New Job Listings Page -->
            <section id="job-listings" class="content-section hidden">
                <h2>Job Listings</h2>
                <div class="job-listings-container">
                    <!-- Info Panel -->
                    <div class="info-panel card">
                        <h3>About Job Recommendations</h3>
                        <p>
                            <strong>Recommended Jobs:</strong> These jobs are highly aligned with your current profile, skills, and experience. Applying to these positions is likely to result in a higher success rate.
                        </p>
                        <p>
                            <strong>Non-Recommended Jobs:</strong> These jobs may have requirements that differ significantly from your current profile. While you are free to apply, you might need to acquire additional skills or experience to be a strong candidate.
                        </p>
                    </div>

                    <!-- Tabs for On-Campus / Off-Campus -->
                    <div class="job-listings-tabs">
                        <button class="tab-btn active" data-category="on-campus">On-Campus</button>
                        <button class="tab-btn" data-category="off-campus">Off-Campus</button>
                    </div>

                    <!-- On-Campus Listings -->
                    <div class="job-category-section" data-category="on-campus">
                        <h3>Recommended</h3>
                        <div class="job-listings-grid" id="on-campus-recommended-listings">
                            <!-- Recommended jobs will be populated here by JS -->
                        </div>

                        <h3>Non-Recommended</h3>
                        <div class="job-listings-grid" id="on-campus-non-recommended-listings">
                            <!-- Non-recommended jobs will be populated here by JS -->
                        </div>
                    </div>

                    <!-- Off-Campus Listings (Initially Hidden) -->
                    <div class="job-category-section hidden" data-category="off-campus">
                        <h3>Recommended</h3>
                        <div class="job-listings-grid" id="off-campus-recommended-listings">
                            <!-- Recommended jobs will be populated here by JS -->
                        </div>

                        <h3>Non-Recommended</h3>
                        <div class="job-listings-grid" id="off-campus-non-recommended-listings">
                            <!-- Non-recommended jobs will be populated here by JS -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Chatbot Interface -->
            <section id="chat" class="content-section hidden">
                <h2>Student Q&A</h2>
                <div class="chat-container card">
                    <div id="chat-history"></div>
                    <form id="chat-form">
                        <input type="text" id="chat-input" placeholder="e.g., What are their strongest DSA topics?" autocomplete="off" required>
                        <button type="submit" class="btn btn-primary">Send</button>
                    </form>
                </div>
            </section>
        </main>
    </div>

    <script src="../static/final.js"></script>
    <script src="../static/job_listings.js"></script> <!-- New JS file for job listings -->
</body>
</html>